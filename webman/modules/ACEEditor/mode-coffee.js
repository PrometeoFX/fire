/* Copyright (c) 2014 Synology Inc. All rights reserved. */

ace.define("ace/mode/coffee",["require","exports","module","ace/tokenizer","ace/mode/coffee_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/folding/coffee","ace/range","ace/mode/text","ace/worker/worker_client","ace/lib/oop"],function(e,h,c){var k=e("../tokenizer").Tokenizer;var j=e("./coffee_highlight_rules").CoffeeHighlightRules;var g=e("./matching_brace_outdent").MatchingBraceOutdent;var a=e("./folding/coffee").FoldMode;var d=e("../range").Range;var f=e("./text").Mode;var b=e("../worker/worker_client").WorkerClient;var i=e("../lib/oop");function l(){this.HighlightRules=j;this.$outdent=new g();this.foldingRules=new a()}i.inherits(l,f);(function(){var o=/(?:[({[=:]|[-=]>|\b(?:else|switch|try|catch(?:\s*[$A-Za-z_\x7f-\uffff][$\w\x7f-\uffff]*)?|finally))\s*$/;var p=/^(\s*)#/;var m=/^\s*###(?!#)/;var n=/^\s*/;this.getNextLineIndent=function(t,r,s){var q=this.$getIndent(r);var u=this.getTokenizer().getLineTokens(r,t).tokens;if(!(u.length&&u[u.length-1].type==="comment")&&t==="start"&&o.test(r)){q+=s}return q};this.toggleCommentLines=function(v,w,t,s){console.log("toggle");var r=new d(0,0,0,0);for(var u=t;u<=s;++u){var q=w.getLine(u);if(m.test(q)){continue}if(p.test(q)){q=q.replace(p,"$1")}else{q=q.replace(n,"$&#")}r.end.row=r.start.row=u;r.end.column=q.length+1;w.replace(r,q)}};this.checkOutdent=function(s,q,r){return this.$outdent.checkOutdent(q,r)};this.autoOutdent=function(q,r,s){this.$outdent.autoOutdent(r,s)};this.createWorker=function(q){var r=new b(["ace"],"ace/mode/coffee_worker","Worker");r.attachToDocument(q.getDocument());r.on("error",function(s){q.setAnnotations([s.data])});r.on("ok",function(s){q.clearAnnotations()});return r};this.$id="ace/mode/coffee"}).call(l.prototype);h.Mode=l});ace.define("ace/mode/coffee_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(c,b,d){var e=c("../lib/oop");var a=c("./text_highlight_rules").TextHighlightRules;e.inherits(f,a);function f(){var m="[$A-Za-z_\\x7f-\\uffff][$\\w\\x7f-\\uffff]*";var k=("this|throw|then|try|typeof|super|switch|return|break|by|continue|catch|class|in|instanceof|is|isnt|if|else|extends|for|own|finally|function|while|when|new|no|not|delete|debugger|do|loop|of|off|or|on|unless|until|and|yes");var l=("true|false|null|undefined|NaN|Infinity");var g=("case|const|default|function|var|void|with|enum|export|implements|interface|let|package|private|protected|public|static|yield|__hasProp|slice|bind|indexOf");var i=("Array|Boolean|Date|Function|Number|Object|RegExp|ReferenceError|String|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray");var j=("Math|JSON|isNaN|isFinite|parseInt|parseFloat|encodeURI|encodeURIComponent|decodeURI|decodeURIComponent|String|");var o=("window|arguments|prototype|document");var p=this.createKeywordMapper({keyword:k,"constant.language":l,"invalid.illegal":g,"language.support.class":i,"language.support.function":j,"variable.language":o},"identifier");var h={token:["paren.lparen","variable.parameter","paren.rparen","text","storage.type"],regex:/(?:(\()((?:"[^")]*?"|'[^')]*?'|\/[^\/)]*?\/|[^()\"'\/])*?)(\))(\s*))?([\-=]>)/.source};var n=/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|[0-2][0-7]{0,2}|3[0-6][0-7]?|37[0-7]?|[4-7][0-7]?|.)/;this.$rules={start:[{token:"constant.numeric",regex:"(?:0x[\\da-fA-F]+|(?:\\d+(?:\\.\\d+)?|\\.\\d+)(?:[eE][+-]?\\d+)?)"},{stateName:"qdoc",token:"string",regex:"'''",next:[{token:"string",regex:"'''",next:"start"},{token:"constant.language.escape",regex:n},{defaultToken:"string"}]},{stateName:"qqdoc",token:"string",regex:'"""',next:[{token:"string",regex:'"""',next:"start"},{token:"paren.string",regex:"#{",push:"start"},{token:"constant.language.escape",regex:n},{defaultToken:"string"}]},{stateName:"qstring",token:"string",regex:"'",next:[{token:"string",regex:"'",next:"start"},{token:"constant.language.escape",regex:n},{defaultToken:"string"}]},{stateName:"qqstring",token:"string.start",regex:'"',next:[{token:"string.end",regex:'"',next:"start"},{token:"paren.string",regex:"#{",push:"start"},{token:"constant.language.escape",regex:n},{defaultToken:"string"}]},{stateName:"js",token:"string",regex:"`",next:[{token:"string",regex:"`",next:"start"},{token:"constant.language.escape",regex:n},{defaultToken:"string"}]},{regex:"[{}]",onMatch:function(s,r,q){this.next="";if(s=="{"&&q.length){q.unshift("start",r);return"paren"}if(s=="}"&&q.length){q.shift();this.next=q.shift();if(this.next.indexOf("string")!=-1){return"paren.string"}}return"paren"}},{token:"string.regex",regex:"///",next:"heregex"},{token:"string.regex",regex:/(?:\/(?![\s=])[^[\/\n\\]*(?:(?:\\[\s\S]|\[[^\]\n\\]*(?:\\[\s\S][^\]\n\\]*)*])[^[\/\n\\]*)*\/)(?:[imgy]{0,4})(?!\w)/},{token:"comment",regex:"###(?!#)",next:"comment"},{token:"comment",regex:"#.*"},{token:["punctuation.operator","text","identifier"],regex:"(\\.)(\\s*)("+g+")"},{token:"punctuation.operator",regex:"\\."},{token:["keyword","text","language.support.class","text","keyword","text","language.support.class"],regex:"(class)(\\s+)("+m+")(?:(\\s+)(extends)(\\s+)("+m+"))?"},{token:["entity.name.function","text","keyword.operator","text"].concat(h.token),regex:"("+m+")(\\s*)([=:])(\\s*)"+h.regex},h,{token:"variable",regex:"@(?:"+m+")?"},{token:p,regex:m},{token:"punctuation.operator",regex:"\\,|\\."},{token:"storage.type",regex:"[\\-=]>"},{token:"keyword.operator",regex:"(?:[-+*/%<>&|^!?=]=|>>>=?|\\-\\-|\\+\\+|::|&&=|\\|\\|=|<<=|>>=|\\?\\.|\\.{2,3}|[!*+-=><])"},{token:"paren.lparen",regex:"[({[]"},{token:"paren.rparen",regex:"[\\]})]"},{token:"text",regex:"\\s+"}],heregex:[{token:"string.regex",regex:".*?///[imgy]{0,4}",next:"start"},{token:"comment.regex",regex:"\\s+(?:#.*)?"},{token:"string.regex",regex:"\\S+"}],comment:[{token:"comment",regex:"###",next:"start"},{defaultToken:"comment"}]};this.normalizeRules()}b.CoffeeHighlightRules=f});ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(c,b,d){var e=c("../range").Range;var a=function(){};(function(){this.checkOutdent=function(f,g){if(!/^\s+$/.test(f)){return false}return/^\s*\}/.test(g)};this.autoOutdent=function(k,l){var g=k.getLine(l);var h=g.match(/^(\s*\})/);if(!h){return 0}var i=h[1].length;var j=k.findMatchingBracket({row:l,column:i});if(!j||j.row==l){return 0}var f=this.$getIndent(k.getLine(j.row));k.replace(new e(l,0,l,i-1),f)};this.$getIndent=function(f){return f.match(/^\s*/)[0]}}).call(a.prototype);b.MatchingBraceOutdent=a});ace.define("ace/mode/folding/coffee",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode","ace/range"],function(b,a,c){var d=b("../../lib/oop");var g=b("./fold_mode").FoldMode;var f=b("../../range").Range;var e=a.FoldMode=function(){};d.inherits(e,g);(function(){this.getFoldWidgetRange=function(o,k,s){var m=this.indentationBlock(o,s);if(m){return m}var r=/\S/;var t=o.getLine(s);var l=t.search(r);if(l==-1||t[l]!="#"){return}var i=t.length;var p=o.getLength();var q=s;var j=s;while(++s<p){t=o.getLine(s);var h=t.search(r);if(h==-1){continue}if(t[h]!="#"){break}j=s}if(j>q){var n=o.getLine(j).length;return new f(q,i,j,n)}};this.getFoldWidget=function(n,j,o){var p=n.getLine(o);var h=p.search(/\S/);var k=n.getLine(o+1);var i=n.getLine(o-1);var l=i.search(/\S/);var m=k.search(/\S/);if(h==-1){n.foldWidgets[o-1]=l!=-1&&l<m?"start":"";return""}if(l==-1){if(h==m&&p[h]=="#"&&k[h]=="#"){n.foldWidgets[o-1]="";n.foldWidgets[o+1]="";return"start"}}else{if(l==h&&p[h]=="#"&&i[h]=="#"){if(n.getLine(o-2).search(/\S/)==-1){n.foldWidgets[o-1]="start";n.foldWidgets[o+1]="";return""}}}if(l!=-1&&l<h){n.foldWidgets[o-1]="start"}else{n.foldWidgets[o-1]=""}if(h<m){return"start"}else{return""}}}).call(e.prototype)});