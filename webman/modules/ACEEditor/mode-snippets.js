/* Copyright (c) 2014 Synology Inc. All rights reserved. */

ace.define("ace/mode/snippets",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/folding/coffee"],function(d,f,c){var h=d("../lib/oop");var e=d("./text").Mode;var j=d("../tokenizer").Tokenizer;var b=d("./text_highlight_rules").TextHighlightRules;var g=function(){var l="SELECTION|CURRENT_WORD|SELECTED_TEXT|CURRENT_LINE|LINE_INDEX|LINE_NUMBER|SOFT_TABS|TAB_SIZE|FILENAME|FILEPATH|FULLNAME";this.$rules={start:[{token:"constant.language.escape",regex:/\\[\$}`\\]/},{token:"keyword",regex:"\\$(?:TM_)?(?:"+l+")\\b"},{token:"variable",regex:"\\$\\w+"},{onMatch:function(o,n,m){if(m[1]){m[1]++}else{m.unshift(n,1)}return this.tokenName},tokenName:"markup.list",regex:"\\${",next:"varDecl"},{onMatch:function(o,n,m){if(!m[1]){return"text"}m[1]--;if(!m[1]){m.splice(0,2)}return this.tokenName},tokenName:"markup.list",regex:"}"},{token:"doc.comment",regex:/^\${2}-{5,}$/}],varDecl:[{regex:/\d+\b/,token:"constant.numeric"},{token:"keyword",regex:"(?:TM_)?(?:"+l+")\\b"},{token:"variable",regex:"\\w+"},{regex:/:/,token:"punctuation.operator",next:"start"},{regex:/\//,token:"string.regex",next:"regexp"},{regex:"",next:"start"}],regexp:[{regex:/\\./,token:"escape"},{regex:/\[/,token:"regex.start",next:"charClass"},{regex:"/",token:"string.regex",next:"format"},{token:"string.regex",regex:"."}],charClass:[{regex:"\\.",token:"escape"},{regex:"\\]",token:"regex.end",next:"regexp"},{token:"string.regex",regex:"."}],format:[{regex:/\\[ulULE]/,token:"keyword"},{regex:/\$\d+/,token:"variable"},{regex:"/[gim]*:?",token:"string.regex",next:"start"},{token:"string",regex:"."}]}};h.inherits(g,b);f.SnippetHighlightRules=g;var i=function(){this.$rules={start:[{token:"text",regex:"^\\t",next:"sn-start"},{token:"invalid",regex:/^ \s*/},{token:"comment",regex:/^#.*/},{token:"constant.language.escape",regex:"^regex ",next:"regex"},{token:"constant.language.escape",regex:"^(trigger|endTrigger|name|snippet|guard|endGuard|tabTrigger|key)\\b"}],regex:[{token:"text",regex:"\\."},{token:"keyword",regex:"/"},{token:"empty",regex:"$",next:"start"}]};this.embedRules(g,"sn-",[{token:"text",regex:"^\\t",next:"sn-start"},{onMatch:function(n,m,l){l.splice(l.length);return this.tokenName},tokenName:"text",regex:"^(?!\t)",next:"start"}])};h.inherits(i,b);f.SnippetGroupHighlightRules=i;var a=d("./folding/coffee").FoldMode;var k=function(){this.HighlightRules=i;this.foldingRules=new a()};h.inherits(k,e);(function(){this.$indentWithTabs=true;this.$id="ace/mode/snippets"}).call(k.prototype);f.Mode=k});ace.define("ace/mode/folding/coffee",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode","ace/range"],function(b,a,c){var d=b("../../lib/oop");var g=b("./fold_mode").FoldMode;var f=b("../../range").Range;var e=a.FoldMode=function(){};d.inherits(e,g);(function(){this.getFoldWidgetRange=function(o,k,s){var m=this.indentationBlock(o,s);if(m){return m}var r=/\S/;var t=o.getLine(s);var l=t.search(r);if(l==-1||t[l]!="#"){return}var i=t.length;var p=o.getLength();var q=s;var j=s;while(++s<p){t=o.getLine(s);var h=t.search(r);if(h==-1){continue}if(t[h]!="#"){break}j=s}if(j>q){var n=o.getLine(j).length;return new f(q,i,j,n)}};this.getFoldWidget=function(n,j,o){var p=n.getLine(o);var h=p.search(/\S/);var k=n.getLine(o+1);var i=n.getLine(o-1);var l=i.search(/\S/);var m=k.search(/\S/);if(h==-1){n.foldWidgets[o-1]=l!=-1&&l<m?"start":"";return""}if(l==-1){if(h==m&&p[h]=="#"&&k[h]=="#"){n.foldWidgets[o-1]="";n.foldWidgets[o+1]="";return"start"}}else{if(l==h&&p[h]=="#"&&i[h]=="#"){if(n.getLine(o-2).search(/\S/)==-1){n.foldWidgets[o-1]="start";n.foldWidgets[o+1]="";return""}}}if(l!=-1&&l<h){n.foldWidgets[o-1]="start"}else{n.foldWidgets[o-1]=""}if(h<m){return"start"}else{return""}}}).call(e.prototype)});