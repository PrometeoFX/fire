/* All rights reserved. */

var debugJsFiles=["{0}/synoSDSjslib/js/FeatureTest.js?{1}","{0}/synoSDSjslib/js/WebAPI.ErrorCode.js?{1}","{0}/synoSDSjslib/js/jslib/Relay.js?{1}","{0}/synoSDSjslib/js/jslib/Utils.js?{1}","{0}/synoSDSjslib/js/Gesture.js?{1}","{0}/synoSDSjslib/js/GestureMgr.js?{1}","{0}/synoSDSjslib/js/extension.js?{1}","{0}/webman/modules/FileBrowser/webfm/webUI/webfmutils.js?{1}","{0}/webman/modules/FileBrowser/webfm/webUI/modules/PathBar.js?{1}","{0}/webman/modules/FileBrowser/webfm/webUI/modules/FocusGridPlugin.js?{1}","{0}/webman/modules/FileBrowser/webfm/webUI/modules/GridFlexPlugin.js?{1}","{0}/webman/modules/FileBrowser/webfm/webUI/modules/SelectAllRowSelectionModel.js?{1}","{0}/webman/modules/Utils/lazyDataView.js?{1}","{0}/synoSDSjslib/js/WebAPI.js?{1}","{0}/webman/modules/FileBrowser/webfm/webUI/thumbnailsView.js?{1}","{0}/webman/modules/FileBrowser/webfm/folderSharing/js/folderSharingExtension.js?{1}","{0}/webman/modules/FileBrowser/webfm/folderSharing/js/folderSharingDownloadAction.js?{1}","{0}/webman/modules/FileBrowser/webfm/folderSharing/js/folderSharingCmp.js?{1}","{0}/webman/modules/FileBrowser/webfm/folderSharing/js/folderSharingToolbar.js?{1}","{0}/webman/modules/FileBrowser/webfm/folderSharing/js/folderSharingUI.js?{1}"];var jsFiles=["{0}/webman/modules/FileBrowser/FolderSharingBase.js?{1}","{0}/webman/modules/FileBrowser/FolderSharing.js?{1}"];var count=0;var loadJS=function(d,e,c){var a=document.createElement("script");a.type="text/javascript";a.src=d;if(a.readyState){a.onreadystatechange=function(){if(a.readyState=="loaded"||a.readyState=="complete"){a.onreadystatechange=null;e()}}}else{a.onload=function(){e()}}a.async=true;var b=document.getElementsByTagName("head")[0];b.appendChild(a)};var urlParam=Ext.urlDecode(window.location.search.substr(1)),enableDebug=urlParam.jsDebug,noCache=urlParam.noCache;var folderSharingJSLoader=function(h,b,g,c){var e=enableDebug?debugJsFiles:jsFiles,d=e.length,a=noCache,f=e[count];if(count===d){g()}if(!f){return}loadJS(String.format(f,h,enableDebug?b+Math.random():(a?b+Math.random():b)),function(){count++;folderSharingJSLoader(h,b,g,c)})};window._S=function(a){SYNO.SDS.Session={version:g_Version,lang:g_Lang,folderSharingURL:g_MD5,folderSharingPath:g_FolderPath,tunnel:g_Tunnel,RELURL:"../webman/modules/FileBrowser/webfm/"};return SYNO.SDS.Session[a]};var init=function(){SYNO.SDS.GestureMgr=new SYNO.SDS._GestureMgr();SYNO.API.currentManager=new SYNO.API.Manager();SYNO.API.currentManager.baseURL=g_Tunnel+"/webapi";SYNO.API.currentManager.queryAPI("SYNO.FolderSharing.",function(){var a=new SYNO.FileStation.FolderSharingWindow();a.toggleMaximize();a.show()})};Ext.onReady(function(){folderSharingJSLoader(g_Tunnel,g_Version,init)});